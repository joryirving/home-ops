---
# yaml-language-server: $schema=https://kube-schemas.pages.dev/external-secrets.io/externalsecret_v1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: &name openclaw
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: *name
    template:
      data:
        ## Gateway token for authentication
        CLAWDBOT_GATEWAY_TOKEN: "{{ .OPENCLAW_GATEWAY_TOKEN }}"
        ##Discord
        DISCORD_BOT_TOKEN: "{{ .DISCORD_BOT_TOKEN }}"
        ## GH Access
        GITHUB_APP_CLIENT_ID: "{{ .MISO_BOT_CLIENT_ID }}"
        GITHUB_APP_CLIENT_SECRET: "{{ .MISO_BOT_CLIENT_SECRET }}"
        GITHUB_APP_ID: "{{ .MISO_BOT_ID }}"
        GITHUB_APP_INSTALLATION_ID: "{{ .MISO_BOT_INSTALLATION_ID }}"
        GITHUB_APP_PRIVATE_KEY: "{{ .MISO_BOT_PRIVATE_KEY }}"
        ## API Keys
        GOOGLE_GEMINI_API_KEY: "{{ .GOOGLE_GEMINI_API_KEY }}"
        OPENAI_API_KEY: "{{ .OPENAI_API_KEY }}"
        OPENROUTER_API_KEY: "{{ .OPENROUTER_API_KEY }}"
  dataFrom:
    - extract:
        key: openclaw
---
# yaml-language-server: $schema=https://kube-schemas.pages.dev/external-secrets.io/externalsecret_v1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: &name openclaw-config
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: *name
    template:
      data:
        ## OpenClaw configuration file
        openclaw.json: |
          {
            "commands": {
              "native": "auto",
              "nativeSkills": "auto"
            },
            "agents": {
              "defaults": {
                "model": {
                  "primary": "openrouter/google/gemini-2.0-flash-exp:free",
                  "fallbacks": [
                    "qwen-portal/coder-model",
                    "google/gemini-3-flash",
                    "openrouter/meta-llama/llama-3.3-70b-instruct:free",
                    "openrouter/qwen/qwen-2.5-coder-32b:free",
                    "ollama-smurf/voytas26/openclaw-oss-20b-deterministic:latest",
                    "ollama-smurf/glm-4.7-flash-reap-23b-a3b",
                    "ollama-k8s/openclaw-brain:latest",
                    "ollama-smurf/qwen3:14b",
                    "ollama-smurf/deepseek-r1:14b",
                    "ollama-k8s/architecture-judge:latest",
                    "ollama-k8s/logic-master:latest",
                    "ollama-k8s/iac-specialist:latest",
                    "ollama-k8s/qwen2.5-coder:32b",
                    "ollama-k8s/llama3.3:70b",
                    "ollama-k8s/deepseek-r1:70b"
                  ]
                },
                "models": {
                  "openrouter/google/gemini-2.0-flash-exp:free": {
                    "alias": "free"
                  },
                  "openrouter/meta-llama/llama-3.3-70b-instruct:free": {
                    "alias": "free"
                  },
                  "openrouter/qwen/qwen-2.5-coder-32b:free": {
                    "alias": "free"
                  },
                  "qwen-portal/coder-model": {
                    "alias": "qwen"
                  },
                  "google/gemini-3-flash": {
                    "alias": "gemini"
                  },
                  "openai/gpt-4o-mini": {
                    "alias": "openai"
                  },
                  "ollama-k8s/logic-master:latest": {
                    "alias": "logic-master"
                  },
                  "ollama-k8s/architecture-judge:latest": {
                    "alias": "arch-judge"
                  },
                  "ollama-k8s/iac-specialist:latest": {
                    "alias": "iac-spec"
                  },
                  "ollama-k8s/openclaw-brain:latest": {
                    "alias": "brain"
                  },
                  "ollama-k8s/qwen2.5-coder:32b": {
                    "alias": "k8s-qwen"
                  },
                  "ollama-k8s/llama3.3:70b": {
                    "alias": "k8s-llama"
                  },
                  "ollama-k8s/deepseek-r1:70b": {
                    "alias": "k8s-deepseek"
                  },
                  "ollama-smurf/qwen3:14b": {
                    "alias": "smurf-qwen"
                  },
                  "ollama-smurf/deepseek-r1:14b": {
                    "alias": "smurf-deepseek"
                  },
                  "ollama-smurf/llava:13b": {
                    "alias": "smurf-vision"
                  },
                  "ollama-smurf/glm-4.7-flash-reap-23b-a3b": {
                    "alias": "smurf-glm"
                  },
                  "ollama-smurf/qwen3:8b": {},
                  "ollama-smurf/voytas26/openclaw-oss-20b-deterministic:latest": {
                    "alias": "smurf"
                  },
                  "ollama-k8s/gpt-oss-20b": {
                    "alias": "k8s-oss"
                  }
                },
                "memorySearch": {
                  "provider": "gemini",
                  "model": "gemini-embedding-001",
                  "fallback": "local",
                  "local": {
                    "modelPath": "hf:ggml-org/embeddinggemma-300M-GGUF/embeddinggemma-300M-Q8_0.gguf"
                  },
                  "sync": {
                    "watch": true
                  },
                  "query": {
                    "hybrid": {
                      "enabled": true,
                      "vectorWeight": 0.7,
                      "textWeight": 0.3
                    }
                  }
                }
              }
            },
            "models": {
              "providers": {
                "openrouter": {
                  "baseUrl": "https://openrouter.ai/api/v1",
                  "apiKey": "{{ .OPENROUTER_API_KEY }}",
                  "api": "openai-completions",
                  "models": [
                    {
                      "id": "google/gemini-2.0-flash-exp:free",
                      "name": "Gemini 2.0 Flash (Free)",
                      "contextWindow": 1048576,
                      "maxTokens": 8192
                    },
                    {
                      "id": "meta-llama/llama-3.3-70b-instruct:free",
                      "name": "Llama 3.3 70B (Free)",
                      "contextWindow": 131072,
                      "maxTokens": 8192
                    },
                    {
                      "id": "qwen/qwen-2.5-coder-32b:free",
                      "name": "Qwen 2.5 Coder (Free)",
                      "contextWindow": 128000,
                      "maxTokens": 8192
                    }
                  ]
                },
                "qwen-portal": {
                  "baseUrl": "https://portal.qwen.ai/v1",
                  "apiKey": "qwen-oauth",
                  "api": "openai-completions",
                  "models": [
                    {
                      "id": "coder-model",
                      "name": "Qwen Coder",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 128000,
                      "maxTokens": 8192
                    },
                    {
                      "id": "vision-model",
                      "name": "Qwen Vision",
                      "reasoning": false,
                      "input": [
                        "text",
                        "image"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 128000,
                      "maxTokens": 8192
                    }
                  ]
                },
                "google": {
                  "baseUrl": "https://generativelanguage.googleapis.com/v1beta",
                  "apiKey": "{{ .GOOGLE_GEMINI_API_KEY }}",
                  "api": "google-generative-ai",
                  "models": [
                    {
                      "id": "gemini-3-flash",
                      "name": "Gemini 3 Flash",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 1048576,
                      "maxTokens": 8192
                    }
                  ]
                },
                "ollama-smurf": {
                  "baseUrl": "http://smurf-pc:11434/v1",
                  "apiKey": "ollama-smurf",
                  "api": "openai-completions",
                  "models": [
                    {
                      "id": "glm-4.7-flash-reap-23b-a3b",
                      "name": "GLM-4.7 Flash REAP-23B-A3B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 32768,
                      "maxTokens": 8192
                    },
                    {
                      "id": "qwen3:14b",
                      "name": "Qwen3 14B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 32768,
                      "maxTokens": 8192
                    },
                    {
                      "id": "qwen3:8b",
                      "name": "Qwen3 8B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 32768,
                      "maxTokens": 8192
                    },
                    {
                      "id": "deepseek-r1:14b",
                      "name": "DeepSeek R1 14B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 32768,
                      "maxTokens": 8192
                    },
                    {
                      "id": "llava:13b",
                      "name": "LLaVA 13B",
                      "reasoning": false,
                      "input": [
                        "text",
                        "image"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 4096,
                      "maxTokens": 8192
                    },
                    {
                      "id": "voytas26/openclaw-oss-20b-deterministic:latest",
                      "name": "OpenClaw OSS 20B Deterministic",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 131072,
                      "maxTokens": 8192
                    }
                  ]
                },
                "ollama-k8s": {
                  "baseUrl": "http://ollama.llm:11434/v1",
                  "apiKey": "ollama-k8s",
                  "api": "openai-completions",
                  "models": [
                    {
                      "id": "gpt-oss:20b",
                      "name": "GPT-OSS 20B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 131072,
                      "maxTokens": 8192
                    },
                    {
                      "id": "qwen2.5-coder:32b",
                      "name": "Qwen2.5 Coder 32B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 32768,
                      "maxTokens": 8192
                    },
                    {
                      "id": "llama3.3:70b",
                      "name": "Llama3.3 70B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 131072,
                      "maxTokens": 8192
                    },
                    {
                      "id": "deepseek-r1:70b",
                      "name": "DeepSeek R1 70B",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 32768,
                      "maxTokens": 8192
                    },
                    {
                      "id": "logic-master:latest",
                      "name": "Logic Master (DeepSeek R1 70B Specialized)",
                      "reasoning": true,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 65536,
                      "maxTokens": 8192
                    },
                    {
                      "id": "architecture-judge:latest",
                      "name": "Architecture Judge (Llama3.3 70B Specialized)",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 65536,
                      "maxTokens": 8192
                    },
                    {
                      "id": "iac-specialist:latest",
                      "name": "IaC Specialist (Qwen2.5 Coder 32B Specialized)",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 65536,
                      "maxTokens": 8192
                    },
                    {
                      "id": "openclaw-brain:latest",
                      "name": "OpenClaw Brain (GPT-OSS 20B Specialized)",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 131072,
                      "maxTokens": 8192
                    }
                  ]
                },
                "openai": {
                  "baseUrl": "https://api.openai.com/v1",
                  "apiKey": "{{ .OPENAI_API_KEY }}",
                  "api": "openai-completions",
                  "models": [
                    {
                      "id": "gpt-4o-mini",
                      "name": "GPT-4o Mini",
                      "reasoning": false,
                      "input": [
                        "text"
                      ],
                      "cost": {
                        "input": 0,
                        "output": 0,
                        "cacheRead": 0,
                        "cacheWrite": 0
                      },
                      "contextWindow": 128000,
                      "maxTokens": 16384
                    }
                  ]
                }
              }
            },
            "auth": {
              "profiles": {
                "qwen-portal:default": {
                  "provider": "qwen-portal",
                  "mode": "oauth"
                },
                "ollama-smurf:default": {
                  "provider": "ollama-smurf",
                  "mode": "api_key"
                },
                "ollama-k8s:default": {
                  "provider": "ollama-k8s",
                  "mode": "api_key"
                },
                "openai:default": {
                  "provider": "openai",
                  "mode": "api_key"
                }
              }
            },
            "hooks": {
              "enabled": true,
              "path": "/webhooks",
              "token": "{{ .GITHUB_WEBHOOK_SECRET }}",
              "maxBodyBytes": 262144,
              "transformsDir": "/home/node/.openclaw/workspace",
              "mappings": [
                {
                  "id": "github-pr-notifications",
                  "match": {
                    "path": "github"
                  },
                  "action": "agent",
                  "wakeMode": "now",
                  "name": "GitHub PR Handler",
                  "transform": {
                    "module": "./github-webhook-transform.js"
                  }
                }
              ]
            },
            "plugins": {
              "entries": {
                "discord": {
                  "enabled": true
                },
                "qwen-portal-auth": {
                  "enabled": true
                }
              }
            },
            "gateway": {
              "mode": "local",
              "auth": {
                "mode": "token",
                "token": "{{ .OPENCLAW_GATEWAY_TOKEN }}"
              },
              "port": 18789,
              "bind": "loopback",
              "tailscale": {
                "mode": "off",
                "resetOnExit": false
              },
              "trustedProxies": ["10.42.0.0/16", "192.168.0.0/16"]
            },
            "messages": {
              "ackReactionScope": "group-mentions"
            },
            "wizard": {
              "lastRunAt": "2026-01-30T18:09:59.466Z",
              "lastRunVersion": "2026.1.29",
              "lastRunCommand": "onboard",
              "lastRunMode": "local"
            }
          }
  dataFrom:
    - extract:
        key: openclaw
