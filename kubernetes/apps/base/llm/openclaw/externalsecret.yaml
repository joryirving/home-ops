---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: openclaw
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: openclaw
    template:
      data:
        CLAWDBOT_GATEWAY_TOKEN: '{{ .OPENCLAW_GATEWAY_TOKEN }}'
        DISCORD_BOT_TOKEN: '{{ .DISCORD_BOT_TOKEN }}'
        GITHUB_APP_CLIENT_ID: '{{ .MISO_BOT_CLIENT_ID }}'
        GITHUB_APP_CLIENT_SECRET: '{{ .MISO_BOT_CLIENT_SECRET }}'
        GITHUB_APP_ID: '{{ .MISO_BOT_ID }}'
        GITHUB_APP_INSTALLATION_ID: '{{ .MISO_BOT_INSTALLATION_ID }}'
        GITHUB_APP_PRIVATE_KEY: '{{ .MISO_BOT_PRIVATE_KEY }}'
        GOOGLE_GEMINI_API_KEY: '{{ .GOOGLE_GEMINI_API_KEY }}'
        OPENAI_API_KEY: '{{ .OPENAI_API_KEY }}'
  dataFrom:
  - extract:
      key: openclaw

---
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: openclaw-config
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword
  target:
    name: openclaw-config
    template:
      data:
        openclaw.json: "{\n  \"commands\": {\n    \"native\": \"auto\",\n    \"nativeSkills\"\
          : \"auto\"\n  },\n  \"agents\": {\n    \"defaults\": {\n      \"model\"\
          : {\n        \"primary\": \"qwen-portal/coder-model\",\n        \"fallbacks\"\
          : [\n          \"google/gemini-3-flash\",\n          \"openai/gpt-4o-mini\"\
          ,\n          \"ollama-smurf/qwen3:14b\",\n          \"ollama-k8s/gpt-oss-20b\"\
          \n        ]\n      },\n      \"models\": {\n        \"qwen-portal/coder-model\"\
          : {\n          \"alias\": \"qwen\"\n        },\n        \"google/gemini-3-flash\"\
          : {\n          \"alias\": \"gemini\"\n        },\n        \"google/gemini-3-pro\"\
          : {\n          \"alias\": \"gemini3pro\"\n        },\n        \"openai/gpt-4o-mini\"\
          : {\n          \"alias\": \"openai\"\n        },\n        \"ollama-smurf/qwen3:8b\"\
          : {\n          \"alias\": \"smurf\"\n        },\n        \"ollama-k8s/gpt-oss-20b\"\
          : {\n          \"alias\": \"k8s\"\n        }\n      }\n    }\n  },\n  \"\
          models\": {\n    \"providers\": {\n      \"qwen-portal\": {\n        \"\
          baseUrl\": \"https://portal.qwen.ai/v1\",\n        \"apiKey\": \"qwen-oauth\"\
          ,\n        \"api\": \"openai-completions\",\n        \"models\": [\n   \
          \       {\n            \"id\": \"coder-model\",\n            \"name\": \"\
          Qwen Coder\",\n            \"reasoning\": false,\n            \"input\"\
          : [\n              \"text\"\n            ],\n            \"cost\": {\n \
          \             \"input\": 0,\n              \"output\": 0,\n            \
          \  \"cacheRead\": 0,\n              \"cacheWrite\": 0\n            },\n\
          \            \"contextWindow\": 128000,\n            \"maxTokens\": 8192\n\
          \          },\n          {\n            \"id\": \"vision-model\",\n    \
          \        \"name\": \"Qwen Vision\",\n            \"reasoning\": false,\n\
          \            \"input\": [\n              \"text\",\n              \"image\"\
          \n            ],\n            \"cost\": {\n              \"input\": 0,\n\
          \              \"output\": 0,\n              \"cacheRead\": 0,\n       \
          \       \"cacheWrite\": 0\n            },\n            \"contextWindow\"\
          : 128000,\n            \"maxTokens\": 8192\n          }\n        ]\n   \
          \   },\n      \"google\": {\n        \"baseUrl\": \"https://generativelanguage.googleapis.com/v1beta\"\
          ,\n        \"apiKey\": \"{{ .GOOGLE_GEMINI_API_KEY }}\",\n        \"api\"\
          : \"google-generative-ai\",\n        \"models\": [\n          {\n      \
          \      \"id\": \"gemini-3-flash\",\n            \"name\": \"Gemini 3 Flash\"\
          ,\n            \"reasoning\": false,\n            \"input\": [\n       \
          \       \"text\"\n            ],\n            \"cost\": {\n            \
          \  \"input\": 0,\n              \"output\": 0,\n              \"cacheRead\"\
          : 0,\n              \"cacheWrite\": 0\n            },\n            \"contextWindow\"\
          : 32760,\n            \"maxTokens\": 8192\n          }\n        ]\n    \
          \  },\n      \"ollama-smurf\": {\n        \"baseUrl\": \"http://smurf-pc:11434/v1\"\
          ,\n        \"apiKey\": \"ollama-smurf\",\n        \"api\": \"openai-completions\"\
          ,\n        \"models\": [\n          {\n            \"id\": \"glm-4.7-flash-reap-23b-a3b\"\
          ,\n            \"name\": \"GLM-4.7 Flash REAP-23B-A3B\",\n            \"\
          reasoning\": false,\n            \"input\": [\n              \"text\"\n\
          \            ],\n            \"cost\": {\n              \"input\": 0,\n\
          \              \"output\": 0,\n              \"cacheRead\": 0,\n       \
          \       \"cacheWrite\": 0\n            },\n            \"contextWindow\"\
          : 32768,\n            \"maxTokens\": 8192\n          }\n        ]\n    \
          \  },\n      \"ollama-k8s\": {\n        \"baseUrl\": \"http://ollama.llm:11434/v1\"\
          ,\n        \"apiKey\": \"ollama-k8s\",\n        \"api\": \"openai-completions\"\
          ,\n        \"models\": [\n          {\n            \"id\": \"gpt-oss-20b\"\
          ,\n            \"name\": \"GPT-OSS 20B\",\n            \"reasoning\": false,\n\
          \            \"input\": [\n              \"text\"\n            ],\n    \
          \        \"cost\": {\n              \"input\": 0,\n              \"output\"\
          : 0,\n              \"cacheRead\": 0,\n              \"cacheWrite\": 0\n\
          \            },\n            \"contextWindow\": 4096,\n            \"maxTokens\"\
          : 4096\n          }\n        ]\n      },\n      \"openai\": {\n        \"\
          baseUrl\": \"https://api.openai.com/v1\",\n        \"apiKey\": \"{{ .OPENAI_API_KEY\
          \ }}\",\n        \"api\": \"openai-completions\",\n        \"models\": [\n\
          \          {\n            \"id\": \"gpt-4o-mini\",\n            \"name\"\
          : \"GPT-4o Mini\",\n            \"reasoning\": false,\n            \"input\"\
          : [\n              \"text\"\n            ],\n            \"cost\": {\n \
          \             \"input\": 0,\n              \"output\": 0,\n            \
          \  \"cacheRead\": 0,\n              \"cacheWrite\": 0\n            },\n\
          \            \"contextWindow\": 128000,\n            \"maxTokens\": 16384\n\
          \          }\n        ]\n      }\n    }\n  },\n  \"auth\": {\n    \"profiles\"\
          : {\n      \"qwen-portal:default\": {\n        \"provider\": \"qwen-portal\"\
          ,\n        \"mode\": \"oauth\"\n      },\n      \"ollama-smurf:default\"\
          : {\n        \"provider\": \"ollama-smurf\",\n        \"mode\": \"api_key\"\
          \n      },\n      \"ollama-k8s:default\": {\n        \"provider\": \"ollama-k8s\"\
          ,\n        \"mode\": \"api_key\"\n      },\n      \"openai:default\": {\n\
          \        \"provider\": \"openai\",\n        \"mode\": \"api_key\"\n    \
          \  }\n    }\n  },\n  \"plugins\": {\n    \"entries\": {\n      \"discord\"\
          : {\n        \"enabled\": true\n      },\n      \"qwen-portal-auth\": {\n\
          \        \"enabled\": true\n      }\n    }\n  },\n  \"gateway\": {\n   \
          \ \"mode\": \"local\",\n    \"auth\": {\n      \"mode\": \"token\",\n  \
          \    \"token\": \"{{ .OPENCLAW_GATEWAY_TOKEN }}\"\n    },\n    \"port\"\
          : 18789,\n    \"bind\": \"loopback\",\n    \"tailscale\": {\n      \"mode\"\
          : \"off\",\n      \"resetOnExit\": false\n    },\n    \"trustedProxies\"\
          : [\n      \"10.42.0.0/16\",\n      \"192.168.0.0/16\"\n    ]\n  },\n  \"\
          messages\": {\n    \"ackReactionScope\": \"group-mentions\"\n  },\n  \"\
          wizard\": {\n    \"lastRunAt\": \"2026-01-30T18:09:59.466Z\",\n    \"lastRunVersion\"\
          : \"2026.1.29\",\n    \"lastRunCommand\": \"onboard\",\n    \"lastRunMode\"\
          : \"local\"\n  },\n  \"hooks\": {\n    \"enabled\": true,\n    \"path\"\
          : \"/webhooks\",\n    \"token\": \"github-webhook-token-placeholder\",\n\
          \    \"maxBodyBytes\": 262144,\n    \"transformsDir\": \"/home/node/.openclaw/workspace\"\
          ,\n    \"mappings\": [\n      {\n        \"id\": \"github-pr-notifications\"\
          ,\n        \"match\": {\n          \"path\": \"github\"\n        },\n  \
          \      \"action\": \"agent\",\n        \"wakeMode\": \"now\",\n        \"\
          name\": \"GitHub PR Handler\",\n        \"transform\": {\n          \"module\"\
          : \"./github-webhook-transform.js\"\n        }\n      }\n    ]\n  }\n}"
  dataFrom:
  - extract:
      key: openclaw
  - extract:
      key: github-bot
