---
web:
  port: $${GATUS_WEB_PORT}

storage:
  type: sqlite
  path: /config/sqlite.db
  caching: true

metrics: true

ui:
  title: Health Status
  header: Health Status
  logo: https://avatars.githubusercontent.com/u/46251616
  link: https://github.com/joryirving
  buttons:
  - name: Github
    link: https://github.com/joryirving
  - name: Homelab
    link: https://github.com/joryirving/home-ops
  - name: Utility Status
    link: https://status-utility.jory.dev

connectivity:
  checker:
    target: 1.1.1.1:53
    interval: 1m

endpoints:
  - name: flux-webhook
    group: main-external
    url: https://flux-webhook.jory.dev
    interval: 1m
    client:
      dns-resolver: tcp://1.1.1.1:53
    conditions: ["[STATUS] == 404"]
    extra-labels:
      CLUSTER: ${CLUSTER}
  - name: main-cert-expiration
    group: domain
    url: "https://status.jory.dev"
    interval: 1h
    conditions:
      - "[CERTIFICATE_EXPIRATION] > 240h"
  - name: nas-cert-expiration
    group: domain
    url: "https://nas.jory.dev"
    interval: 1h
    conditions:
      - "[CERTIFICATE_EXPIRATION] > 240h"
  - name: utility-cert-expiration
    group: domain
    url: "https://status-utility.jory.dev"
    interval: 1h
    conditions:
      - "[CERTIFICATE_EXPIRATION] > 240h"
    extra-labels:
      cluster: utility
  - name: status
    group: utility-external
    url: https://status-utility.jory.dev/
    interval: 1m
    client:
      dns-resolver: tcp://1.1.1.1:53
    conditions: ["[STATUS] == 200"]
    extra-labels:
      CLUSTER: utility

remote:
  instances:
    - endpoint-prefix: ""
      url: "https://status-utility.jory.dev/api/v1/endpoints/statuses"
